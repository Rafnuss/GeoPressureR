<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Compute windspeed and airspeed on a graph — graph_add_wind • GeoPressureR</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Compute windspeed and airspeed on a graph — graph_add_wind"><meta name="description" content="Reads the NetCDF files downloaded and interpolate the average windspeed experienced by the
bird on each possible edge, as well as the corresponding airspeed.
In addition, the graph can be further pruned based on a threshold of airspeed thr_as.
See section 2.2.4 in Nussbaumer (2023b)
for more technical details and the GeoPressureManual for an
illustration on how to use it."><meta property="og:description" content="Reads the NetCDF files downloaded and interpolate the average windspeed experienced by the
bird on each possible edge, as well as the corresponding airspeed.
In addition, the graph can be further pruned based on a threshold of airspeed thr_as.
See section 2.2.4 in Nussbaumer (2023b)
for more technical details and the GeoPressureManual for an
illustration on how to use it."><meta property="og:image" content="https://raphaelnussbaumer.com/GeoPressureR/logo.png"><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=M5FY4BPHTB"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'M5FY4BPHTB');
</script></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">GeoPressureR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">3.3.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">News</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/Rafnuss/GeoPressureR/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Compute windspeed and airspeed on a <code>graph</code></h1>
      <small class="dont-index">Source: <a href="https://github.com/Rafnuss/GeoPressureR/blob/v3.3.1/R/graph_add_wind.R" class="external-link"><code>R/graph_add_wind.R</code></a></small>
      <div class="d-none name"><code>graph_add_wind.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Reads the NetCDF files downloaded and interpolate the average windspeed experienced by the
bird on each possible edge, as well as the corresponding airspeed.</p>
<p>In addition, the graph can be further pruned based on a threshold of airspeed <code>thr_as</code>.</p>
<p>See section <a href="https://besjournals.onlinelibrary.wiley.com/doi/10.1111/2041-210X.14082#mee314082-sec-0008-title" class="external-link">2.2.4 in Nussbaumer (2023b)</a>
for more technical details and the <a href="https://raphaelnussbaumer.com/GeoPressureManual/trajectory-with-wind.html" class="external-link">GeoPressureManual</a> for an
illustration on how to use it.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">graph_add_wind</span><span class="op">(</span></span>
<span>  <span class="va">graph</span>,</span>
<span>  <span class="va">pressure</span>,</span>
<span>  rounding_interval <span class="op">=</span> <span class="fl">60</span>,</span>
<span>  interp_spatial_linear <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  file <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">stap_id</span><span class="op">)</span></span>
<span>    <span class="fu">glue</span><span class="fu">::</span><span class="fu"><a href="https://glue.tidyverse.org/reference/glue.html" class="external-link">glue</a></span><span class="op">(</span><span class="st">"./data/wind/{graph$param$id}/{graph$param$id}_{stap_id}.nc"</span><span class="op">)</span>,</span>
<span>  thr_as <span class="op">=</span> <span class="cn">Inf</span>,</span>
<span>  quiet <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-graph">graph<a class="anchor" aria-label="anchor" href="#arg-graph"></a></dt>
<dd><p>a GeoPressureR graph object.</p></dd>


<dt id="arg-pressure">pressure<a class="anchor" aria-label="anchor" href="#arg-pressure"></a></dt>
<dd><p>pressure measurement of the associated <code>tag</code> data used to estimate the pressure
level (i.e., altitude) of the bird during the flights. This data.frame needs to contain <code>date</code> as
POSIXt and <code>value</code> in hPa.</p></dd>


<dt id="arg-rounding-interval">rounding_interval<a class="anchor" aria-label="anchor" href="#arg-rounding-interval"></a></dt>
<dd><p>temporal resolution on which to query the variable (min). Default is to
match ERA5 native resolution (1hr).</p></dd>


<dt id="arg-interp-spatial-linear">interp_spatial_linear<a class="anchor" aria-label="anchor" href="#arg-interp-spatial-linear"></a></dt>
<dd><p>logical to interpolate the variable linearly over space, if <code>FALSE</code>
takes the nearest neighbour. ERA5 native resolution is 0.25°</p></dd>


<dt id="arg-file">file<a class="anchor" aria-label="anchor" href="#arg-file"></a></dt>
<dd><p>absolute or relative path of the ERA5 wind data file to be downloaded. Function
taking as single argument the stationary period identifier.</p></dd>


<dt id="arg-thr-as">thr_as<a class="anchor" aria-label="anchor" href="#arg-thr-as"></a></dt>
<dd><p>threshold of airspeed (km/h).</p></dd>


<dt id="arg-quiet">quiet<a class="anchor" aria-label="anchor" href="#arg-quiet"></a></dt>
<dd><p>logical to hide messages about the progress</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>a <code>graph</code> object with windspeed and airspeed as <code>ws</code> and <code>as</code> respectively.</p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>Nussbaumer, Raphaël, Mathieu Gravey, Martins Briedis, Felix Liechti, and Daniel
Sheldon. 2023. Reconstructing bird trajectories from pressure and wind data using a highly
optimized hidden Markov model. <em>Methods in Ecology and Evolution</em>, 14, 1118–1129
<a href="https://doi.org/10.1111/2041-210X.14082" class="external-link">https://doi.org/10.1111/2041-210X.14082</a>.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><a href="https://raphaelnussbaumer.com/GeoPressureManual/trajectory-with-wind.html" class="external-link">GeoPressureManual</a></p></div>
    </div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Raphaël Nussbaumer, Mathieu Gravey.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

