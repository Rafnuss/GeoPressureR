<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-GB"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Workflow for GeoPressureR — geopressuretemplate • GeoPressureR</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Workflow for GeoPressureR — geopressuretemplate"><meta name="description" content="The geopressuretemplate() function manages the complete workflow for modelling bird
trajectories using geolocator data. It includes the creation tag object, the construction of
the likelihood maps (pressure and/or light), the creation of the graph model construction, and,
finally, the estimation of the trajectory products and the pressure path computation. Read the
Workflow chapter in the GeoPressureManual  for more
information.
To be able to run successfully these function, you will need to have correctly set-up the data
and configuration files according following the GeoPressureTemplate standard ."><meta property="og:description" content="The geopressuretemplate() function manages the complete workflow for modelling bird
trajectories using geolocator data. It includes the creation tag object, the construction of
the likelihood maps (pressure and/or light), the creation of the graph model construction, and,
finally, the estimation of the trajectory products and the pressure path computation. Read the
Workflow chapter in the GeoPressureManual  for more
information.
To be able to run successfully these function, you will need to have correctly set-up the data
and configuration files according following the GeoPressureTemplate standard ."><meta property="og:image" content="https://raphaelnussbaumer.com/GeoPressureR/logo.png"><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=G-M5FY4BPHTB"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-M5FY4BPHTB');
</script><!-- Google tag (gtag.js) --></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">GeoPressureR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">3.4.2</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">News</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/Rafnuss/GeoPressureR/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Workflow for GeoPressureR</h1>
      <small class="dont-index">Source: <a href="https://github.com/Rafnuss/GeoPressureR/blob/v3.4.2/R/geopressuretemplate.R" class="external-link"><code>R/geopressuretemplate.R</code></a>, <a href="https://github.com/Rafnuss/GeoPressureR/blob/v3.4.2/R/geopressuretemplate_config.R" class="external-link"><code>R/geopressuretemplate_config.R</code></a>, <a href="https://github.com/Rafnuss/GeoPressureR/blob/v3.4.2/R/geopressuretemplate_graph.R" class="external-link"><code>R/geopressuretemplate_graph.R</code></a>, and 2 more</small>
      <div class="d-none name"><code>geopressuretemplate.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>The <code>geopressuretemplate()</code> function manages the complete workflow for modelling bird
trajectories using geolocator data. It includes the creation <code>tag</code> object, the construction of
the likelihood maps (pressure and/or light), the creation of the graph model construction, and,
finally, the estimation of the trajectory products and the pressure path computation. Read the
<a href="https://raphaelnussbaumer.com/GeoPressureManual/geopressuretemplate-workflow.html" class="external-link">Workflow chapter in the GeoPressureManual </a> for more
information.</p>
<p>To be able to run successfully these function, you will need to have correctly set-up the data
and configuration files according following the <a href="https://raphaelnussbaumer.com/GeoPressureManual/geopressuretemplate-project.html" class="external-link">GeoPressureTemplate standard </a>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">geopressuretemplate</span><span class="op">(</span></span>
<span>  <span class="va">id</span>,</span>
<span>  config <span class="op">=</span> <span class="fu">config</span><span class="fu">::</span><span class="fu"><a href="https://rstudio.github.io/config/reference/get.html" class="external-link">get</a></span><span class="op">(</span>config <span class="op">=</span> <span class="va">id</span><span class="op">)</span>,</span>
<span>  quiet <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  file <span class="op">=</span> <span class="fu">glue</span><span class="fu">::</span><span class="fu"><a href="https://glue.tidyverse.org/reference/glue.html" class="external-link">glue</a></span><span class="op">(</span><span class="st">"./data/interim/{id}.RData"</span><span class="op">)</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">geopressuretemplate_config</span><span class="op">(</span></span>
<span>  <span class="va">id</span>,</span>
<span>  config <span class="op">=</span> <span class="fu">config</span><span class="fu">::</span><span class="fu"><a href="https://rstudio.github.io/config/reference/get.html" class="external-link">get</a></span><span class="op">(</span>config <span class="op">=</span> <span class="va">id</span><span class="op">)</span>,</span>
<span>  assert_graph <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">geopressuretemplate_graph</span><span class="op">(</span></span>
<span>  <span class="va">id</span>,</span>
<span>  config <span class="op">=</span> <span class="fu">config</span><span class="fu">::</span><span class="fu"><a href="https://rstudio.github.io/config/reference/get.html" class="external-link">get</a></span><span class="op">(</span>config <span class="op">=</span> <span class="va">id</span><span class="op">)</span>,</span>
<span>  quiet <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  file <span class="op">=</span> <span class="fu">glue</span><span class="fu">::</span><span class="fu"><a href="https://glue.tidyverse.org/reference/glue.html" class="external-link">glue</a></span><span class="op">(</span><span class="st">"./data/interim/{id}.RData"</span><span class="op">)</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">geopressuretemplate_pressurepath</span><span class="op">(</span></span>
<span>  <span class="va">id</span>,</span>
<span>  config <span class="op">=</span> <span class="fu">config</span><span class="fu">::</span><span class="fu"><a href="https://rstudio.github.io/config/reference/get.html" class="external-link">get</a></span><span class="op">(</span>config <span class="op">=</span> <span class="va">id</span><span class="op">)</span>,</span>
<span>  quiet <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  file <span class="op">=</span> <span class="fu">glue</span><span class="fu">::</span><span class="fu"><a href="https://glue.tidyverse.org/reference/glue.html" class="external-link">glue</a></span><span class="op">(</span><span class="st">"./data/interim/{id}.RData"</span><span class="op">)</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">geopressuretemplate_tag</span><span class="op">(</span></span>
<span>  <span class="va">id</span>,</span>
<span>  config <span class="op">=</span> <span class="fu">config</span><span class="fu">::</span><span class="fu"><a href="https://rstudio.github.io/config/reference/get.html" class="external-link">get</a></span><span class="op">(</span>config <span class="op">=</span> <span class="va">id</span><span class="op">)</span>,</span>
<span>  quiet <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  file <span class="op">=</span> <span class="fu">glue</span><span class="fu">::</span><span class="fu"><a href="https://glue.tidyverse.org/reference/glue.html" class="external-link">glue</a></span><span class="op">(</span><span class="st">"./data/interim/{id}.RData"</span><span class="op">)</span>,</span>
<span>  assert_graph <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-id">id<a class="anchor" aria-label="anchor" href="#arg-id"></a></dt>
<dd><p>unique identifier of a tag.</p></dd>


<dt id="arg-config">config<a class="anchor" aria-label="anchor" href="#arg-config"></a></dt>
<dd><p>configuration object specifying workflow parameters, which is loaded by default
using <code>config::get(config = id)</code>.</p></dd>


<dt id="arg-quiet">quiet<a class="anchor" aria-label="anchor" href="#arg-quiet"></a></dt>
<dd><p>Logical. If <code>TRUE</code>, suppresses informational messages during execution. The default
value is <code>FALSE</code>.</p></dd>


<dt id="arg-file">file<a class="anchor" aria-label="anchor" href="#arg-file"></a></dt>
<dd><p>A file path to save the intermediate results (e.g., tag, graph, and pressure paths).
Default is <code>./data/interim/{id}.RData</code>.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Additional parameters to overwrite default or config values. Always prefer to modify
<code>config.yml</code> if possible.</p></dd>


<dt id="arg-assert-graph">assert_graph<a class="anchor" aria-label="anchor" href="#arg-assert-graph"></a></dt>
<dd><p>Logical. If <code>TRUE</code>, check that the config is compatible for the creation of
a graph. The default value is <code>TRUE</code>. Set to <code>FALSE</code> only if you don't want to create a graph
model</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>The function returns nothing. Instead, it saves the processed outputs (tag, graph,
pressure paths, etc.) to the specified <code>file</code>.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The <code>geopressuretemplate</code> function is a high-level entry point that coordinates multiple
steps for processing the geolocator data and produce trajectories. It relies on underlying child
functions for each step:</p><ul><li><p><strong>Tag Creation <code>geopressuretemplate_tag()</code></strong>: Initializes and labels the <code>tag</code> object. It
also generates light and pressure likelihood maps:</p></li>
</ul><ol><li><p><code><a href="tag_create.html">tag_create()</a></code>: Initializes the tag object.</p></li>
<li><p><code><a href="tag_label.html">tag_label()</a></code>: Adds labels.</p></li>
<li><p><code><a href="tag_set_map.html">tag_set_map()</a></code>: Sets the spatial and temporal parameters.</p></li>
<li><p>If <code>"map_pressure"</code> is in the <code>config$geopressuretemplate$likelihood</code>:</p><ul><li><p><code><a href="geopressure_map.html">geopressure_map()</a></code>: Computes the pressure likelihood.</p></li>
</ul></li>
<li><p>If <code>"map_light"</code> is in the <code>config$geopressuretemplate$likelihood</code>:</p><ul><li><p><code>twilight_create() |&gt; twilight_read() |&gt; geolight_map()</code>: Computes the light likelihood.</p></li>
</ul></li>
</ol><ul><li><p><strong>Graph Creation <code>geopressuretemplate_graph()</code></strong>: Builds a movement model graph
based <code>tag</code> data, and can include wind effects if specified. Outputs such as
marginal distributions, most likely paths, and simulation paths can be computed.</p></li>
</ul><ol><li><p><code><a href="graph_create.html">graph_create()</a></code>: Creates the graph based on tag.</p></li>
<li><p>If <code>config$graph_set_movement$type == "gs"</code> (i.e., no wind):</p><ul><li><p><code><a href="graph_set_movement.html">graph_set_movement()</a></code>: Sets the movement model without wind.</p></li>
</ul></li>
<li><p>If <code>config$graph_set_movement$type == "as"</code> (i.e., with wind):</p><ul><li><p><code><a href="graph_add_wind.html">graph_add_wind()</a></code>: Adds wind data to the graph.</p></li>
<li><p><code><a href="graph_set_movement.html">graph_set_movement()</a></code>: Sets the movement model with wind.</p></li>
</ul></li>
<li><p>If <code>"marginal"</code> is in <code>config$geopressuretemplate$outputs</code>:</p><ul><li><p><code><a href="graph_marginal.html">graph_marginal()</a></code>: Computes the marginal distribution map.</p></li>
</ul></li>
<li><p>If <code>"most_likely"</code> is in <code>config$geopressuretemplate$outputs</code>:</p><ul><li><p><code><a href="graph_most_likely.html">graph_most_likely()</a></code>: Computes the most likely path based on the movement model.</p></li>
</ul></li>
<li><p>If <code>"simulation"</code> is in <code>config$geopressuretemplate$outputs</code>:</p><ul><li><p><code><a href="graph_simulation.html">graph_simulation()</a></code>: Runs simulations to model multiple possible paths.</p></li>
</ul></li>
<li><p>If <code>path_geopressureviz_{id}.csv</code> exists in <code>./data/interim/</code>:</p><ul><li><p>Save a data.frame variable <code>path_geopressureviz</code> (see below)</p></li>
</ul></li>
<li><p><code><a href="https://rdrr.io/r/base/save.html" class="external-link">save()</a></code>: Saves the computed graph and associated objects in <code>data/interim/{id}.Rdata</code></p></li>
</ol><ul><li><p><strong>Pressure Path Processing <code>geopressuretemplate_pressurepath()</code></strong>: Computes pressurepaths
(<code>pressurepath_create</code>) using the content of the <code>Rdata</code> file and appending the pressurepath
data.frame to the same file.</p></li>
</ul><ol><li><p>If <code>"most_likely"</code> is in <code>config$geopressuretemplate$pressurepath</code>, computes the pressure path
for <code>path_most_likely</code>.</p></li>
<li><p>If <code>"geopressureviz"</code> is in <code>config$geopressuretemplate$pressurepath</code> computes the pressure
path for <code>path_geopressureviz</code></p></li>
</ol><p>Each of these child functions can be called individually or automatically as part of
the <code>geopressuretemplate</code> workflow.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><a href="https://raphaelnussbaumer.com/GeoPressureManual/geopressuretemplate-workflow.html" class="external-link">GeoPressureManual </a></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="co"># Run the complete geopressuretemplate workflow</span></span></span>
<span class="r-in"><span><span class="fu">geopressuretemplate</span><span class="op">(</span><span class="st">"18LX"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Or run step-by-step</span></span></span>
<span class="r-in"><span><span class="co"># you can check that all the parameters are correctly set in the config file</span></span></span>
<span class="r-in"><span><span class="fu">geopressuretemplate_config</span><span class="op">(</span><span class="va">id</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># 1. creation of the tag</span></span></span>
<span class="r-in"><span><span class="va">tag</span> <span class="op">&lt;-</span> <span class="fu">geopressuretemplate_tag</span><span class="op">(</span><span class="st">"18LX"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># 2. creation of the graph</span></span></span>
<span class="r-in"><span><span class="fu">geopressuretemplate_graph</span><span class="op">(</span><span class="st">"18LX"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># 3. Computation of the pressurepath</span></span></span>
<span class="r-in"><span><span class="fu">geopressuretemplate_pressurepath</span><span class="op">(</span><span class="st">"18LX"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Raphaël Nussbaumer, Mathieu Gravey.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

